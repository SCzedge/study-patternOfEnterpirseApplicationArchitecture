
# chap02
## 도메인 논리구성
도메인 논리를 트랜잭션스크립트, 도메인모델, 테이블 모듈 세가지 주요 패턴으로 분리했다.
### 트랜잭션 스크립트
- 도메인 논리를 저장하는 가장 간단한 방식.
- 비즈니스 트랜잭션마다 스크립트 하나를 만드는 패턴
#### 장점
- 이해가 쉬운 간단한 절차적모델
- 행 데이터 게이트웨이나 테이블 데이터 게이트웨이를 적용해 원본 계층과 함께 사용하기에 적합
- 트랜잭션의 경계설정이 쉽다.
#### 단점
- 코드 중복에의한 복잡도 상승
    -> 도메인 모델을 통해 해결가능
트랜잭션 스크립트 대신 도메인 모델을 사용하는것은 패러다임의 전환을 의미한다.
각 객체가 논리의 일부를 담당하게하여 루틴이 모두 처리하지 않도록 한다.

### 도메인 모델
- 복잡한 논리를 체계적으로 관리할 수 있는 여러 기법 사용가능
- 좋은 데이터 원본 계층 확보에는 상당한 비용과 시간이 필요

### 테이블 모듈
- 도메인 모델은 각 인스턴스가 있지만, 테이블 모듈은 인스턴스가 하나만 존재한다.

### 서비스계층
도메인 논리를 처리하는 일반적인 방법은 도메인 계층을 둘로 나누는 것이며 이경우 서비스계층을 도메인모델이나 테이블 모듈 위에 배치한다.

서비스 계층은 명확한 api를 제공하며 트랜잭션제어와 보안같은 기능을 넣기 용이하다. 

서비스 계층을 사용할 때는 얼마나 많은 동작을 넣을지 결정하는것이 아주 중요하다. 
1. 가장 소극적 사례는 서비스계층을 파사드로 만들고 모든 동작을 기반 객체에 넣고 호출을 하위 객체로 전달하게 하는것이다.  
이 경우 사용하기 쉬운 api를 제공하며 트랜잭션 래퍼와 보안 검사를 추가하기도 편리하다.

2. 반대되는 사례는 비즈니스 논리를 서비스 계층안의 트랜잭션 스크립트에 넣는것이다.  
이경우 도메인 객체는 간단하며 간단한 데이터 원본계층을 사용할 수 있다.

3. 혼합된것으로 컨트롤러 - 엔터티 형식이있다.