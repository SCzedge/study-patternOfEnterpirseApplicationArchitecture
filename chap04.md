# Chap04
## 웹 프레젠테이션
웹서버에서 프로그램을 구성하는 방식에는 스크립트와 서버페이지 두가지 주요 형식이 있다.

### 스크립트 형식  
http호출을 처리하는 함수나 메서드를 포함하는 프로그램. cgi스크립트와 자바 서블릿이 있음.  
서브루틴으로 구성 될 수 있으며 다른 서비스를 만든ㄹ거나 이용할 수 있다.   
문자열 형식의 http요청 객체를 조사하는 방법으로 데이터를 얻으며 출력은 요청과 마찬가지로 응답이라는 문자열이며,
스크립트가 언어의 일반 출력 스트림 작업을 통해 출력할 수 있다.

### 서버페이지 형식  
스트림명령으로 응답을 작성하는일은 상당히 불편하며 이를 해소하기위해 서버페이지라는 아이디어가 나왔다.  
반환페이지는 html로 작성하고 특정 시점에 실행할 코드를 html 스크립틀릿으로 삽입한다. php,asp,jsp가 있다.  

스크립트 스타일은 요청해석에 적합하고 서버페이지 스타일은 응답 포매팅에 적합하여 스크립트를 요청에, 
서버페이지를 응답에 사용하는 방식이 자연스럽게 받아들여졌으며 이는 모델 뷰 컨트롤러 패턴이다.

### 입력 컨트롤러
모델 뷰 컨트롤러는 자주 혼동되며 이는 '컨트롤러'라는 용어 때문이다.  
컨트롤러는 다양한 문맥에서 사용되지만 모델 뷰 컨트롤러 패턴에서 의도하는것과는 다른의미로 사용되며 컨트롤러 대신 입력컨트롤러라는 용어를 선호한다.

입력 컨트롤러는 요청을 받고 정보를 꺼낸후 비즈니스 논리를 적절한 모델객체로 전달한다.  
모델 객체는 데이터 원본객체와 통신하고 요청에 명시된 작업을 수행한다음 응답에 필요한 정보를 수집하여 입력 컨트롤러로 제어를 반환한다.  
입력컨트롤러는 결과를 조사하고 응답을 표시하는데 필요한 뷰를 결정하며 응답데이터와 함께 제어를 뷰로 전달한다.

모델 뷰 컨트롤러 패턴을 적용하는 첫번째이자 가장 중요한 이유는 모델을 웹 프레젠테이션으로부터 와전히 분리하기 위해서이다.  
이는 프레젠테이션을 수정하거나 추가하기 용이하고 처리를 별도의 객체에서 수행하면 테스트도 수월해진다.  
서버 페이지를 뷰로 사용하는경우 처리를 별도 객체에서 수행하는것이 중요하다.

다른의미의 컨트롤러로는 프레젠테이션 객체를 도메인 객체로부터 분리하기위해 사용되는 중간계층으로의 어플리케이션 컨트롤러다.  
어플리케이션 컨트롤러는 흐름을 처리하고 어떤화면을 어떤 순서로 표시할 지 결정하는 역활을 한다.
프레젠테이션과 독립적으로 만들 수 있으며, 재사용이 기능하다.  
모든 시스템에 어플리케이션 컨트롤러가 필요한것은 아니며 화면 흐름을 컴퓨터가 제어하는경우에 유용하며 사용자가 제어하는경우 필요하지 않다.

## 뷰 패턴
뷰에서는 변환 뷰, 템플릿 뷰, 2단계 뷰라는 세가지 패턴을 고려하여야한다.  
먼저 변환뷰나 템플릿뷰 중 어떤것을 사용할 지 결정한 다음, 1단계 뷰나 2단계 뷰를 사용할 지 결정하면된다.

### 템플릿뷰와 변환뷰의 선택
#### 템플릿뷰
템플릿뷰를 사용하면 페이지 구조안에 프레젠테이션을 작성하고 표식을 삽입해 동적 콘텐츠를 넣을 위치를 지정할 수 있다.  
여러 플랫폼이 이 패턴에 기반을 두고 있으며  그중 많은수가 페이지에서 완전한 프로그래밍 언어를 사용할 수 있는 서버 페이지기술(asp,jsp,php)이다.  

이 기술은 상당히 강력하고 유연하지만 복잡한 코드로 이어지기 쉬우므로 페이지 구조에서 프로그래밍논리를 철저하게 배제하도록 노력해야한다.

#### 변환뷰
XSLT같은 변환 스타일의 프로그램을 사용한다.  
도메인데이터가 xml형식이거나 쉽게 변환 할 수 있을때 효과적이다.





